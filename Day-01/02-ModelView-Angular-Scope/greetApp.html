<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Greet App</title>
	<style>
		#divResult{
			color : red;
			font-size: 28pt;
		}
		label{
			display: block;
		}
		.content{
            padding: 10px;
            border: 2px solid black;
            border-radius: 10px;
            background-color: lightgray;
            margin-top: 10px;
        }
	</style>
	<script src="jquery-1.11.2.js"></script>
	<script src="angular.js"></script>
	<script>
    String.prototype.toInt = function(){
        return parseInt(this,10);
    };


    function Greeter(){
        this.firstName = '';
        this.lastName = '';
        this.greetMsg = '';
    }
    Greeter.prototype.greet = function(){
        this.greetMsg = 'Hi ' + this.firstName + " " + this.lastName + ", Have a nice day";
    }

    $(function(){
        window.greeter = new Greeter();
        angular.bootstrap(document.body);

        window.scope = angular.element(document.body).scope();
        window.scope.greeter = greeter;

        $("*[app-model]").each(function(){
           var $self = $(this);
           var model = $self.attr("app-model");

           $self.change(function(){
               scope.$apply(function(){
                    var expr = model + ' = "' + $self.val() + '"';
                    scope.$eval(expr);
               });
           });
           scope.$watch(model, function(newValue,oldValue){
                $self.val(newValue);
            });

        });

        $("*[app-bind]").each(function(){
           var $self = $(this);
           var model = $self.attr("app-bind");

           scope.$watch(model, function(newValue,oldValue){
                $self.html(newValue);
            });

        });

        $("*[app-click]").click(function(){

            var expr = $(this).attr("app-click");
            scope.$apply(function(){
                scope.$eval(expr);
            });
        });






    });



    </script>
</head>
<body>
	 <input type="text" app-model="greeter.firstName">
	 <input type="text" app-model="greeter.lastName">
	 <input type="button" value="Greet" app-click="greeter.greet()">
	 <div app-bind="greeter.greetMsg"></div>


</body>
</html>
